/**
 * ■ 長文軽量スクロールプラグイン ■
 */

■ 概要 ■
このプラグインは、長文テキストをスムーズにスクロールするための図形プラグインです。
スクロール量を指定するだけで、任意の箇所をお手軽に表示できます。

■ できること ■
□ すごく長い文をすごい速さでスクロール表示
□ ただ単に長文の一部を行数指定して表示
□ 1行だけの文を同じテンポで次々に切り替えて表示

■ インストール方法 ■
YMM4内の[ツール]>[プラグインポータル]をご利用ください。
または、以下の手順で、手動でのインストールもできます。
□ 手動インストール手順
　　1. 以下のURLの Assets から LongTextScrollerPlugin.ymme をダウンロード
　　　　https://github.com/thiramisu/ymm4-plugin-long-text-scroller/releases/latest
　　2. 保存した.ymmeファイルをYMM4のタイムライン上にドラッグ＆ドロップ

■ 設定項目 ■
□ スクロール:
　　スクロールの量を設定します。[スクロール単位]によって単位が変わります。
□ スクロール単位:
　　スクロール量の単位です。○○px・○○行ぶん・○○行から表示、から選べます。
□ 行の高さ:
　　1行あたりの高さ。
　　本家テキストだと単位が%ですが、このプラグインだとpxの方が使いやすい気がしたので、pxになっています。
　　アニメーションする際は、[スクロール単位]を[行]のどちらかに（[px]にすると行の高さが0pxの場合に何行目を描画すべきかが求められず描画できないため）、
　　[折り返し]を[折り返さない]か[文字単位で折り返す]に（他だとアルゴリズムの関係で0を跨いだ際に改行位置が変わるため）することをオススメします。
□ 表示行数:
　　最大表示行数を設定します。
□ 半行ずらす:
　　登場・消滅位置を半行ぶん上にずらします。
　　映像エフェクトを追加すると一番上の行の下端が見切れることへの簡易的な対策です。
　　描画座標そのものを調整すれば同じことが実現できるので、あまり存在意義はないかもしれません。
□ テキスト:
　　表示するテキストです。
□ フォント・サイズ・折り返し幅・文字色・太字・イタリック:
　　本家テキストと同じです。
□ 折り返し:
　　本家テキストに追加で、「超過時のみ文字単位」があります（ライブラリになんか余ってたので）。
　　これを指定した場合、基本は単語単位で折り返しますが、1単語だけで折り返し幅を超える長さの場合は単語途中で改行する動作になるようです。
　　ただし、英文以外ではあまり恩恵を感じないかもしれません。
□ 文字揃え:
　　本家テキストに追加で、「両端揃え」があります（ライブラリになんか余ってたので）。
　　これを指定した場合、折り返し幅いっぱいになるように文字間隔を自動調整する動作になります。
▽ 未実装:
　　本家テキストと重ねて表示してみるとY座標が異なりますが、直し方が分からなかったので仕様とさせてください。
　　「装飾」は映像エフェクトで代用してください。テキスト同士が重なっている場合の描画は異なりますがご容赦……。
　　「文字ごとに分割」は実装方法が謎だったので未実装です。
　　同じ理由で縦書きにも非対応です。
  　リッチテキストには非対応です。


■ Tipsなど ■
特定の範囲だけ描画したい場合、[クリッピング]ではなく[図形切り抜き]を使用すると想定した見た目になると思います。
他の映像エフェクト（例えば[背景]など）にも微妙な感じになるものがあると思いますが、それらは仕様とさせてください。

両端揃えの最終行も両端揃えにしたい場合、適当な文字（ああああなど）を表示行数外に続けて書くと両端揃えになります。

■ 実装の雰囲気解説 ■
1. 描画内容の位置を計算（描画はまだしない）
2. 必要部分の文字列だけを抜き出す
3. 抜き出した文字列を描画

■ 免責事項 ■
本プラグインの使用によって生じたいかなる損害・トラブルについても、
作者は一切の責任を負いません。
ご利用は自己責任でお願いいたします。

■ 作者情報・連絡先 ■
なにかありましたら、以下までご連絡ください。
X：@tiramisu_oTATo

■ ライセンス ■
このプラグインのソースは MIT ライセンスのもとで公開されています。
詳細は LICENSE.txt をご確認ください。

■ 更新履歴 ■
□ v1.2.0 (2025-10-03)
　　設定に文字間隔を追加
　　設定スライダーの倍率がスケールしなかったのを修正
　　「折り返し: 折り返さない」でも折り返し幅が表示に影響するバグを修正
　　この修正で位置がずれてしまった場合、折り返し幅の半分だけ横移動させると元通りにできます。
□ v1.1.1 (2025-09-25)
　　README.txt を改善
　　内部データの更新判定ロジックを、自力実装から既存機能を活用する方式に
□ v1.1.0 (2025-09-24)
　　内部データの保存方式の見直しに伴い、System.IO.Hashingへの依存が不要になったので削除
□ v1.0.0 (2025-09-15)
　　初回リリース